<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Study Assistant - Complete App</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .navbar {
        background: rgba(0, 0, 0, 0.3);
        color: white;
        padding: 15px 40px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .nav-links button {
        background: none;
        border: none;
        color: white;
        margin-left: 20px;
        cursor: pointer;
        font-size: 1em;
        font-weight: 500;
      }

      .nav-links button:hover {
        text-decoration: underline;
      }

      .container {
        max-width: 1200px;
        margin: 40px auto;
        padding: 0 20px;
      }

      .page {
        display: none;
        animation: fadeIn 0.3s;
      }

      .page.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .auth-box {
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
        max-width: 450px;
        margin: 100px auto;
      }

      .hero {
        background: white;
        border-radius: 20px;
        padding: 60px 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        text-align: center;
        margin: 100px auto;
        max-width: 900px;
      }

      h1 {
        font-size: 3em;
        color: #667eea;
        margin-bottom: 20px;
      }

      h2 {
        color: #667eea;
        margin-bottom: 30px;
        text-align: center;
      }

      .tagline {
        font-size: 1.3em;
        color: #666;
        margin-bottom: 40px;
      }

      .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 40px 0;
      }

      .feature-card {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
      }

      .feature-icon {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 500;
      }

      input,
      textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1em;
      }

      input:focus,
      textarea:focus {
        outline: none;
        border-color: #667eea;
      }

      .btn {
        padding: 14px 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
        font-weight: 600;
        transition: transform 0.3s;
      }

      .btn:hover {
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: white;
        color: #667eea;
        border: 2px solid #667eea;
      }

      .btn-block {
        width: 100%;
      }

      .link {
        text-align: center;
        margin-top: 20px;
        color: #666;
      }

      .link a {
        color: #667eea;
        cursor: pointer;
        text-decoration: none;
        font-weight: 600;
      }

      .cta-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-top: 40px;
      }

      .section {
        background: white;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .stat-value {
        font-size: 2.5em;
        color: #667eea;
        font-weight: bold;
      }

      .stat-label {
        color: #666;
        margin-top: 10px;
      }

      .chat-container {
        background: white;
        border-radius: 15px;
        height: 600px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .chat-messages {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        background: #f8f9fa;
      }

      .message {
        margin-bottom: 20px;
        display: flex;
        align-items: flex-start;
      }

      .message.user {
        justify-content: flex-end;
      }

      .message-bubble {
        max-width: 70%;
        padding: 12px 18px;
        border-radius: 18px;
        line-height: 1.5;
      }

      .message.user .message-bubble {
        background: #667eea;
        color: white;
      }

      .message.assistant .message-bubble {
        background: white;
        color: #333;
        border: 1px solid #e0e0e0;
      }

      .chat-input-area {
        padding: 20px;
        background: white;
        border-top: 1px solid #e0e0e0;
        display: flex;
        gap: 10px;
      }

      .chat-input {
        flex: 1;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 25px;
      }

      .reminder-card,
      .note-card {
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
        margin-bottom: 15px;
        border-left: 4px solid #667eea;
      }

      .btn-small {
        padding: 8px 15px;
        font-size: 0.9em;
        margin-left: 10px;
      }

      .btn-delete {
        background: #dc3545;
      }

      .btn-complete {
        background: #28a745;
      }

      .alert {
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
      }

      .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Landing Page -->
    <div id="landingPage" class="page active">
      <div class="container">
        <div class="hero">
          <h1>üéì AI Study Assistant</h1>
          <p class="tagline">Your intelligent companion for smarter studying</p>

          <div class="features">
            <div class="feature-card">
              <div class="feature-icon">üí¨</div>
              <div><strong>AI Chatbot</strong></div>
            </div>
            <div class="feature-card">
              <div class="feature-icon">‚è∞</div>
              <div><strong>Smart Reminders</strong></div>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üìù</div>
              <div><strong>Note Summarizer</strong></div>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üìä</div>
              <div><strong>Progress Tracking</strong></div>
            </div>
          </div>

          <div class="cta-buttons">
            <button class="btn" onclick="showPage('registerPage')">
              Get Started Free
            </button>
            <button class="btn btn-secondary" onclick="showPage('loginPage')">
              Sign In
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="page">
      <div class="auth-box">
        <h2>üîê Login</h2>
        <div id="loginAlert" class="alert hidden"></div>

        <form onsubmit="handleLogin(event)">
          <div class="form-group">
            <label>Username</label>
            <input type="text" id="loginUsername" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="loginPassword" required />
          </div>
          <button type="submit" class="btn btn-block">Login</button>
        </form>

        <div class="link">
          Don't have an account?
          <a onclick="showPage('registerPage')">Register here</a>
        </div>
        <div class="link">
          <a onclick="showPage('landingPage')">‚Üê Back to Home</a>
        </div>
      </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="page">
      <div class="auth-box">
        <h2>üìù Register</h2>
        <div id="registerAlert" class="alert hidden"></div>

        <form onsubmit="handleRegister(event)">
          <div class="form-group">
            <label>Username</label>
            <input type="text" id="regUsername" required />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="regEmail" required />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="regPassword" minlength="6" required />
          </div>
          <button type="submit" class="btn btn-block">Register</button>
        </form>

        <div class="link">
          Already have an account?
          <a onclick="showPage('loginPage')">Login here</a>
        </div>
        <div class="link">
          <a onclick="showPage('landingPage')">‚Üê Back to Home</a>
        </div>
      </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="page">
      <div class="navbar">
        <h2>üéì AI Study Assistant</h2>
        <div class="nav-links">
          <button onclick="showPage('dashboardPage')">Dashboard</button>
          <button onclick="showPage('chatbotPage')">Chatbot</button>
          <button onclick="showPage('remindersPage')">Reminders</button>
          <button onclick="showPage('notesPage')">Notes</button>
          <button onclick="handleLogout()">Logout</button>
        </div>
      </div>

      <div class="container">
        <div class="section">
          <h1>Welcome back, <span id="dashboardUsername">User</span>! üëã</h1>
          <p style="color: #666; margin-top: 10px">
            Here's your study progress overview
          </p>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="studyTime">0</div>
            <div class="stat-label">Minutes Studied</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="reminderCount">0</div>
            <div class="stat-label">Active Reminders</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="noteCount">0</div>
            <div class="stat-label">Notes Created</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="chatCount">0</div>
            <div class="stat-label">Chat Messages</div>
          </div>
        </div>

        <div class="section">
          <h2>üöÄ Quick Actions</h2>
          <button class="btn" onclick="showPage('chatbotPage')">
            Ask AI Assistant
          </button>
          <button
            class="btn"
            onclick="showPage('remindersPage')"
            style="margin-left: 10px"
          >
            Create Reminder
          </button>
          <button
            class="btn"
            onclick="showPage('notesPage')"
            style="margin-left: 10px"
          >
            Add Notes
          </button>
        </div>
      </div>
    </div>

    <!-- Chatbot Page -->
    <div id="chatbotPage" class="page">
      <div class="navbar">
        <h2>üí¨ AI Chatbot</h2>
        <div class="nav-links">
          <button onclick="showPage('dashboardPage')">Dashboard</button>
          <button onclick="showPage('chatbotPage')">Chatbot</button>
          <button onclick="showPage('remindersPage')">Reminders</button>
          <button onclick="showPage('notesPage')">Notes</button>
          <button onclick="handleLogout()">Logout</button>
        </div>
      </div>

      <div class="container">
        <div class="chat-container">
          <div class="chat-messages" id="chatMessages">
            <div class="message assistant">
              <div class="message-bubble">
                Hello! I'm your AI study assistant. Ask me anything about your
                studies! üìö
              </div>
            </div>
          </div>

          <div class="chat-input-area">
            <input
              type="text"
              id="chatInput"
              class="chat-input"
              placeholder="Type your question here..."
              onkeypress="if(event.key==='Enter') sendMessage()"
            />
            <button class="btn" onclick="sendMessage()">Send</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Reminders Page -->
    <div id="remindersPage" class="page">
      <div class="navbar">
        <h2>‚è∞ Reminders</h2>
        <div class="nav-links">
          <button onclick="showPage('dashboardPage')">Dashboard</button>
          <button onclick="showPage('chatbotPage')">Chatbot</button>
          <button onclick="showPage('remindersPage')">Reminders</button>
          <button onclick="showPage('notesPage')">Notes</button>
          <button onclick="handleLogout()">Logout</button>
        </div>
      </div>

      <div class="container">
        <div class="section">
          <h2>Create New Reminder</h2>
          <form onsubmit="createReminder(event)">
            <div class="form-group">
              <label>Title</label>
              <input type="text" id="reminderTitle" required />
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea id="reminderDesc" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Date and Time</label>
              <input type="datetime-local" id="reminderTime" required />
            </div>
            <button type="submit" class="btn">Create Reminder</button>
          </form>
        </div>

        <div class="section">
          <h2>Your Reminders</h2>
          <div id="remindersList"></div>
        </div>
      </div>
    </div>

    <!-- Notes Page -->
    <div id="notesPage" class="page">
      <div class="navbar">
        <h2>üìù Notes & Summaries</h2>
        <div class="nav-links">
          <button onclick="showPage('dashboardPage')">Dashboard</button>
          <button onclick="showPage('chatbotPage')">Chatbot</button>
          <button onclick="showPage('remindersPage')">Reminders</button>
          <button onclick="showPage('notesPage')">Notes</button>
          <button onclick="handleLogout()">Logout</button>
        </div>
      </div>

      <div class="container">
        <div class="section">
          <h2>Create New Note</h2>
          <form onsubmit="createNote(event)">
            <div class="form-group">
              <label>Title</label>
              <input type="text" id="noteTitle" required />
            </div>
            <div class="form-group">
              <label>Content</label>
              <textarea id="noteContent" rows="10" required></textarea>
            </div>
            <button type="submit" class="btn">Create & Summarize</button>
          </form>
        </div>

        <div class="section">
          <h2>Your Notes</h2>
          <div id="notesList"></div>
        </div>
      </div>
    </div>

    <script>
      // Data Storage (using JavaScript objects instead of localStorage for sandbox compatibility)
      let appData = {
        users: [],
        currentUser: null,
        reminders: [],
        notes: [],
        chatHistory: [],
        studySessions: [],
      };

      // Initialize with demo data
      function initApp() {
        // Create demo user
        if (appData.users.length === 0) {
          appData.users.push({
            username: "demo",
            email: "demo@example.com",
            password: "demo123",
          });
        }
      }

      // Page Navigation
      function showPage(pageId) {
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active");
        });
        document.getElementById(pageId).classList.add("active");

        if (pageId === "dashboardPage") {
          updateDashboard();
        } else if (pageId === "remindersPage") {
          displayReminders();
        } else if (pageId === "notesPage") {
          displayNotes();
        } else if (pageId === "chatbotPage") {
          displayChatHistory();
        }
      }

      // Authentication
      function handleRegister(event) {
        event.preventDefault();
        const username = document.getElementById("regUsername").value;
        const email = document.getElementById("regEmail").value;
        const password = document.getElementById("regPassword").value;

        const existingUser = appData.users.find(
          (u) => u.username === username || u.email === email
        );

        if (existingUser) {
          showAlert(
            "registerAlert",
            "Username or email already exists!",
            "error"
          );
          return;
        }

        appData.users.push({ username, email, password });
        showAlert(
          "registerAlert",
          "Registration successful! Please login.",
          "success"
        );
        setTimeout(() => showPage("loginPage"), 1500);
      }

      function handleLogin(event) {
        event.preventDefault();
        const username = document.getElementById("loginUsername").value;
        const password = document.getElementById("loginPassword").value;

        const user = appData.users.find(
          (u) => u.username === username && u.password === password
        );

        if (user) {
          appData.currentUser = user;
          showAlert("loginAlert", "Login successful!", "success");
          setTimeout(() => showPage("dashboardPage"), 1000);
        } else {
          showAlert("loginAlert", "Invalid username or password!", "error");
        }
      }

      function handleLogout() {
        appData.currentUser = null;
        showPage("landingPage");
      }

      // Dashboard
      function updateDashboard() {
        if (!appData.currentUser) return;

        document.getElementById("dashboardUsername").textContent =
          appData.currentUser.username;

        const userReminders = appData.reminders.filter(
          (r) => r.username === appData.currentUser.username
        );
        const userNotes = appData.notes.filter(
          (n) => n.username === appData.currentUser.username
        );
        const userChats = appData.chatHistory.filter(
          (c) => c.username === appData.currentUser.username
        );

        document.getElementById("reminderCount").textContent =
          userReminders.length;
        document.getElementById("noteCount").textContent = userNotes.length;
        document.getElementById("chatCount").textContent = userChats.length;
        document.getElementById("studyTime").textContent =
          Math.floor(Math.random() * 120) + 30;
      }

      // Chatbot
      function sendMessage() {
        const input = document.getElementById("chatInput");
        const message = input.value.trim();

        if (!message) return;

        const messagesDiv = document.getElementById("chatMessages");

        // Add user message
        messagesDiv.innerHTML += `
                <div class="message user">
                    <div class="message-bubble">${message}</div>
                </div>
            `;

        // Generate AI response
        const response = generateAIResponse(message);

        setTimeout(() => {
          messagesDiv.innerHTML += `
                    <div class="message assistant">
                        <div class="message-bubble">${response}</div>
                    </div>
                `;
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 500);

        // Save to history
        if (appData.currentUser) {
          appData.chatHistory.push({
            username: appData.currentUser.username,
            message: message,
            response: response,
            timestamp: new Date(),
          });
        }

        input.value = "";
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }

      function generateAIResponse(message) {
        const lower = message.toLowerCase();

        const responses = {
          python:
            "Python is a high-level programming language. Key concepts: data types, functions, classes, modules. What specific topic would you like to learn?",
          algorithm:
            "Algorithms are step-by-step procedures for solving problems. Common types: sorting, searching, graph algorithms, and dynamic programming.",
          "data structure":
            "Data structures organize data efficiently. Common ones: Arrays, Linked Lists, Stacks, Queues, Trees, Graphs.",
          database:
            "Databases store and manage data. SQL databases (MySQL, PostgreSQL) use tables. NoSQL (MongoDB) uses documents.",
          "machine learning":
            "Machine Learning enables computers to learn from data. Key concepts: supervised/unsupervised learning, neural networks.",
          "web development":
            "Web development involves frontend (HTML, CSS, JS) and backend (Python, Node.js). Popular frameworks: React, Flask, Django.",
          calculus:
            "Calculus studies continuous change. Key topics: limits, derivatives (rate of change), integrals (area under curves).",
          physics:
            "Physics studies matter and energy. Branches: mechanics, thermodynamics, electromagnetism, quantum mechanics.",
          motivate:
            "Every expert was once a beginner! Take breaks, stay consistent, break large topics into smaller chunks. You got this! üí™",
          schedule:
            "Study planning tips: 1) Use Pomodoro (25min study, 5min break) 2) Prioritize hard subjects 3) Set specific goals 4) Use reminders!",
          summarize:
            "Go to the Notes section and add your content. I'll create a concise summary highlighting key points!",
        };

        for (let keyword in responses) {
          if (lower.includes(keyword)) {
            return responses[keyword];
          }
        }

        return `I understand you're asking about: "${message}". As your study assistant, I can help with: explaining concepts, creating schedules, summarizing notes, and answering academic questions. Could you be more specific?`;
      }

      function displayChatHistory() {
        if (!appData.currentUser) return;

        const messagesDiv = document.getElementById("chatMessages");
        messagesDiv.innerHTML =
          '<div class="message assistant"><div class="message-bubble">Hello! I\'m your AI study assistant. Ask me anything about your studies! üìö</div></div>';

        const userChats = appData.chatHistory.filter(
          (c) => c.username === appData.currentUser.username
        );
        userChats.forEach((chat) => {
          messagesDiv.innerHTML += `
                    <div class="message user">
                        <div class="message-bubble">${chat.message}</div>
                    </div>
                    <div class="message assistant">
                        <div class="message-bubble">${chat.response}</div>
                    </div>
                `;
        });
      }

      // Reminders
      function createReminder(event) {
        event.preventDefault();

        if (!appData.currentUser) return;

        const reminder = {
          id: Date.now(),
          username: appData.currentUser.username,
          title: document.getElementById("reminderTitle").value,
          description: document.getElementById("reminderDesc").value,
          time: document.getElementById("reminderTime").value,
          completed: false,
        };

        appData.reminders.push(reminder);

        event.target.reset();
        displayReminders();
        alert("Reminder created successfully!");
      }

      function displayReminders() {
        if (!appData.currentUser) return;

        const list = document.getElementById("remindersList");
        const userReminders = appData.reminders.filter(
          (r) => r.username === appData.currentUser.username
        );

        if (userReminders.length === 0) {
          list.innerHTML =
            '<p style="color: #999;">No reminders yet. Create one to stay on track!</p>';
          return;
        }

        list.innerHTML = userReminders
          .map(
            (r) => `
                <div class="reminder-card">
                    <strong>${r.title}</strong>
                    <p style="color: #666; margin: 5px 0;">${r.description}</p>
                    <small style="color: #999;">Due: ${new Date(
                      r.time
                    ).toLocaleString()}</small>
                    ${
                      !r.completed
                        ? `<button class="btn btn-complete btn-small" onclick="completeReminder(${r.id})">‚úì Complete</button>`
                        : '<span style="color: #28a745; margin-left: 10px;">‚úì Completed</span>'
                    }
                    <button class="btn btn-delete btn-small" onclick="deleteReminder(${
                      r.id
                    })">Delete</button>
                </div>
            `
          )
          .join("");
      }

      function completeReminder(id) {
        const reminder = appData.reminders.find((r) => r.id === id);
        if (reminder) {
          reminder.completed = true;
          displayReminders();
        }
      }

      function deleteReminder(id) {
        if (confirm("Delete this reminder?")) {
          appData.reminders = appData.reminders.filter((r) => r.id !== id);
          displayReminders();
        }
      }

      // Notes
      function createNote(event) {
        event.preventDefault();

        if (!appData.currentUser) return;

        const content = document.getElementById("noteContent").value;
        const summary = summarizeText(content);

        const note = {
          id: Date.now(),
          username: appData.currentUser.username,
          title: document.getElementById("noteTitle").value,
          content: content,
          summary: summary,
          created: new Date(),
        };

        appData.notes.push(note);

        event.target.reset();
        displayNotes();
        alert("Note created and summarized!");
      }

      function summarizeText(text) {
        const sentences = text.split(/[.!?]+/).filter((s) => s.trim());

        if (sentences.length <= 2) return text;

        return `${sentences[0].trim()}. ${sentences[
          sentences.length - 1
        ].trim()}.`;
      }

      function displayNotes() {
        if (!appData.currentUser) return;

        const list = document.getElementById("notesList");
        const userNotes = appData.notes.filter(
          (n) => n.username === appData.currentUser.username
        );

        if (userNotes.length === 0) {
          list.innerHTML =
            '<p style="color: #999;">No notes yet. Create one to get started!</p>';
          return;
        }

        list.innerHTML = userNotes
          .map(
            (n) => `
                <div class="note-card">
                    <h3>${n.title}</h3>
                    <p style="color: #666; margin: 10px 0;">${n.content.substring(
                      0,
                      200
                    )}${n.content.length > 200 ? "..." : ""}</p>
                    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin-top: 10px; border-left: 4px solid #2196F3;">
                        <strong>üìå AI Summary:</strong>
                        <p style="margin-top: 8px;">${n.summary}</p>
                    </div>
                    <small style="color: #999; display: block; margin-top: 10px;">Created: ${n.created.toLocaleString()}</small>
                </div>
            `
          )
          .join("");
      }

      function showAlert(elementId, message, type) {
        const alert = document.getElementById(elementId);
        alert.textContent = message;
        alert.className = `alert alert-${type}`;
        alert.classList.remove("hidden");
        setTimeout(() => alert.classList.add("hidden"), 3000);
      }

      // Initialize app on load
      initApp();
    </script>
  </body>
</html>
